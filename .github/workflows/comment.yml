name: PR Thank


on:
  workflow_run:
    workflows: ["Scan", "Build"]
    types:
      - completed

permissions:
  issues: write
  pull-requests: write

jobs:
  comment:
    if: github.event.workflow_run.pull_request.base.ref == github.event.workflow_run.repository.default_branch
    runs-on: ubuntu-latest
    steps:
      - name: debug
        run: |
          printenv
          echo ${{ github.event.workflow_run }}
          echo ${{ github.event.workflow_run.repository }}
          echo ${{ github.event.workflow_run.workflow.pull_request.base.ref }}
          echo ${{ github.event.workflow_run.workflow.pull_request.number }}
        env:
          PR_ID: ${{ github.event.workflow_run.pull_request.number }}
      - uses: actions/github-script@v6
        env:
          PR_ID: ${{ github.event.workflow_run.pull_request.number }}
        with:
          script: |
            github.rest.issues.createComment({
              ...context.repo,
              issue_number: process.env.PR_ID,
              body: "Thanks very much for contributing! :zap:"
            })
  

